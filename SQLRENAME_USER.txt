EXEC sp_MSforeachdb '
IF ''?'' NOT IN(''master'', ''model'', ''msdb'', ''tempdb'',''distribution'') 
BEGIN 
	USE [?]
	DECLARE @USER_NAME VARCHAR (100)
	DECLARE @NEW_NAME VARCHAR (100)
	DECLARE @CMD VARCHAR (100)

	DECLARE RENAME_CURSOR CURSOR FOR
		SELECT NAME
		FROM SYSUSERS
		WHERE NAME LIKE ''BNDES%''

	OPEN RENAME_CURSOR

	FETCH NEXT FROM RENAME_CURSOR INTO @USER_NAME

	WHILE @@FETCH_STATUS = 0
	BEGIN
		
		SET @NEW_NAME = REPLACE (@USER_NAME,''BNDES\'','''') 
		SET @CMD = ''ALTER USER [''+ @USER_NAME + ''] WITH NAME = [''+ @NEW_NAME + '']''
		PRINT @CMD
		--EXEC(@CMD)
		FETCH NEXT FROM RENAME_CURSOR INTO @USER_NAME
	END
	CLOSE RENAME_CURSOR
	DEALLOCATE RENAME_CURSOR
END'
